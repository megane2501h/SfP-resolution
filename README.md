# SfP-resolution
Change the resolution of "アイドルマスター シャイニーカラーズ Song for Prism" and "シャニソン".


## 概要

DMM版シャニソンで解像度を1920x1080にするバッチファイルです。

DMM版シャニソンでは、Alt+Enterで全画面化とウィンドウモードが切り替えられます。
また、レジストリを書き換えることでレンダリング解像度を1280x720から任意の解像度に変更することができます。
しかし、全画面からウィンドウモードへ切り替えると、レジストリ上では1280x720に書き換えられ、ゲーム画面でロード等を挟むと再度1280x720で描画されてしまいます。
このbatは、レジストリを10秒おきにチェックし、1920x1080に書き換えることで、レジストリの変更の手間を省きます。

## 使い方

1. [SfP_Rewrite_Reg.bat](https://github.com/megane2501h/SfP-resolution/releases/download/v0.0.1/SfP_Rewrite_Reg.bat)をダウンロードします。
1. SfP_Rewrite_Reg.batをダブルクリックします。以上。

## もう少し凝った使い方

このbatは、メモ帳等のテキストエディタで開き、以下の変数を変更して使用してください。

- `User_Width`: 解像度の横幅
- `User_Height`: 解像度の縦幅
- `Detection_Interval`: 解像度のチェック間隔 (秒)

## 動作

- DMM版シャニソンが起動されていない状態でbatを実行した場合、シャニソンを起動します。
- DMM版シャニソンが既に起動している場合は、解像度に変更がないか10秒ごとにチェックします。
- DMM版シャニソンの動作を終了した場合、bat自体も自動で終了します。

## 10秒ごとにやっていること

1. 書き換え対象のレジストリのキーが存在するかチェックします。
   - 存在しない場合は終了します。
2. 書き換え対象のレジストリの値が1280x720になっているかチェックします。
   - 変更されていた場合は`User_Width x User_Height`に書き換えます。
3. `tasklist`コマンドでシャニソンのプロセス"imasscprism.exe"が起動しているかチェックします。
   - 存在しない場合はbatも終了します。
